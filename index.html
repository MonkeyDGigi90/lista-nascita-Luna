<!DOCTYPE HTML>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&amp;display=swap" rel="stylesheet">
<title>Lista Nascita di Beatrice - Farmacroce</title>
<style>
    :root{
      --accent:#d47fa6;
      --muted:#6b7280;
      --card-bg:#ffffff;
      --page-bg:#f6f7fb;
      --success:#16a34a;
    }
    html,body{height:100%;}
    body {
      font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
      background: var(--page-bg);
      margin:0; padding:24px; color:#111827;
    }
    .site-header{max-width:1100px;margin:0 auto 18px;padding:12px 6px;text-align:center}
    .logo{max-width:180px;display:inline-block}
    .header-top{display:flex;align-items:center;justify-content:center;gap:12px}
    .social a{color:var(--muted);text-decoration:none}
    .social svg{width:28px;height:28px;vertical-align:middle}
    h1{color:var(--accent);margin:6px 0 4px;font-weight:700}
    p.lead{color:var(--muted);margin-top:0}

    .container{max-width:1100px;margin:0 auto;display:block}
    .main{display:flex;gap:20px;align-items:flex-start}
     /* Products grid: three cards per row on desktop, responsive to 2/1 on smaller screens
       Use fixed 3-column layout and make each grid cell the same height so rows align */
     .products-grid{flex:1;display:grid;grid-template-columns:repeat(3,1fr);gap:20px;align-items:start;justify-items:stretch}

     /* Ensure each product fills its grid cell */
     .products-grid > .product{width:100%}

     /* Product card: set a sensible max-height to avoid cards that become too tall
       Clamp description text and hide overflow so cards remain uniform */
     .product{background:var(--card-bg);border-radius:10px;padding:12px;border:1px solid #e6e9ef;box-shadow:0 2px 6px rgba(16,24,40,0.03);display:flex;flex-direction:column;justify-content:space-between;min-height:380px;max-height:420px;overflow:hidden}
     .product img{width:100%;height:150px;object-fit:cover;border-radius:6px;margin-bottom:10px}
     .product h3{margin:6px 0}
     .product .desc{min-height:48px;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;line-height:1.2rem;max-height:3.6rem;transition:max-height .18s ease}
    .product .desc.expanded{display:block;overflow:visible;max-height:9999px;-webkit-line-clamp:unset}
    /* When description expands, allow card to grow */
    .product:has(.desc.expanded){max-height:none;overflow:visible;height:auto}
    .more-btn{background:none;border:none;color:var(--accent);cursor:pointer;padding:6px 0;font-weight:600}
    .product .meta{margin-top:4px}
    .product .add-btn{margin-top:auto}

    /* Adjust breakpoints to keep 3 columns on medium screens; switch to 2 columns
       below 768px and to 1 column below 480px */
    @media (max-width: 768px) {
      .products-grid{grid-template-columns:repeat(2,1fr)}
      .product img{height:140px}
    }

    /* Mobile-specific tweaks: larger touch targets, compact header and spacing */
    @media (max-width: 480px) {
      body{padding:12px}
      .site-header{padding:8px 6px;text-align:left}
      .logo{max-width:140px}
      .header-top{justify-content:space-between;align-items:center;gap:8px}
      .social svg{width:32px;height:32px}
      .products-grid{gap:12px;grid-template-columns:1fr;grid-auto-rows:auto}
      /* allow full flow on small screens so images and expanded descriptions are visible */
      .product{max-height:none!important;overflow:visible!important;height:auto!important;min-height:auto!important}
      .product img, .product-img, img.product-img{
        height:200px!important;
        min-height:200px!important;
        width:100%!important;
        display:block!important;
        object-fit:cover!important;
        visibility:visible!important;
        opacity:1!important;
        margin-bottom:10px!important;
      }
      .product h3{font-size:1rem}
      .product .desc{-webkit-line-clamp:4}
      .product .add-btn{padding:12px;font-size:1rem;border-radius:8px}
      .cart{width:100%;margin-top:12px}
      #cart .cart-item .left strong{font-size:0.95rem}
    }
    .product h3{margin:0 0 6px;font-size:1.05rem}
    .product p{margin:4px 0;color:var(--muted)}
    .stock{font-size:0.95rem}
    .product .add-btn{width:100%;display:inline-block;padding:10px;border-radius:8px;background:var(--accent);color:#fff;border:none;cursor:pointer;font-weight:600}
    .product .add-btn[disabled]{opacity:0.7}

    .product .desc{color:#374151;margin:8px 0 6px;font-size:0.95rem}
    .product .meta{display:block;color:#6b7280;font-size:0.85rem}
    .product .price{font-weight:600;color:#111827;font-size:1.1rem;margin:8px 0}

    .cart{width:320px;background:linear-gradient(180deg,#ffffff,#fbfdff);border-radius:10px;padding:14px;border:1px solid #e2e8f0;box-shadow:0 6px 18px rgba(15,23,42,0.06)}
    .cart h2{margin:0 0 10px}
    #cart{list-style:none;padding:0;margin:0 0 12px}
    #cart li{margin:0;padding:0}
    /* cart item layout */
    .cart .total{display:flex;align-items:center;justify-content:space-between;font-size:1.05rem;margin-top:8px}
    .cart button{border-radius:8px}
    #cart .cart-item{display:flex;justify-content:space-between;align-items:center;padding:8px;border-bottom:1px solid #e6e9ef}
    #cart .cart-item .left{max-width:68%;overflow:hidden}
    #cart .cart-item .left strong{display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    #cart .cart-item .left small{color:var(--muted);display:block}
    #cart .cart-item .controls{display:flex;gap:6px;align-items:center}
    #cart .cart-item .controls button{padding:6px 8px;border-radius:6px;border:none;background:#f3f4f6;cursor:pointer;color:#111}
    #cart .cart-item .controls button:hover{filter:brightness(.95)}
    #cart .cart-item .controls .qty-btn{width:34px;height:34px;display:inline-flex;align-items:center;justify-content:center;padding:0}
    #cart .cart-item .controls .remove-btn{background:#ef4444;color:#fff}
    /* PayPal mark next to total */
    .cart .total img{display:inline-block;margin-left:8px;height:28px;vertical-align:middle}

    #paypal-button-container{margin-top:10px}
    #paypal-mark{transition:opacity .2s}

    /* Lightbox */
    .lightbox{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(2,6,23,0.6);z-index:9999;opacity:0;pointer-events:none;transition:opacity .18s}
    .lightbox.open{opacity:1;pointer-events:auto}
    .lightbox-content{max-width:92%;max-height:92%;border-radius:8px;overflow:hidden;box-shadow:0 10px 40px rgba(2,6,23,0.6);background:#fff;padding:6px}
    .lightbox-content img{display:block;max-width:100%;max-height:80vh;object-fit:contain}
    .lightbox-close{position:absolute;top:18px;right:20px;background:rgba(255,255,255,0.9);border-radius:999px;padding:6px 8px;cursor:pointer;font-weight:700}

    @media(max-width:880px){
      .main{flex-direction:column}
      .cart{width:100%}
    }
 </style>
</head>
<body>
<!-- Intestazione (logo inserito nella sezione header sotto) -->

    <!-- Nota: mettere le immagini prodotto nella cartella `img/` con i nomi suggeriti.
      Esempi: `img/crema-idratante-baby.jpg`, `img/set-biberon.jpg`, `img/pannolini-bio.jpg` -->
  <div class="site-header">
    <div class="header-top">
      <img class="logo" src="Logo.jpg" alt="Logo Farmacroce">
      <div class="social" aria-hidden="false">
        <a href="https://www.facebook.com/Farmacroce" target="_blank" rel="noopener" aria-label="Pagina Facebook Farmacroce">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" style="fill:#1877F2">
            <path d="M22 12a10 10 0 1 0-11.5 9.9v-7H8.5v-3h2v-2.3c0-2 1.2-3.1 3-3.1.9 0 1.8.1 1.8.1v2h-1c-1 0-1.3.6-1.3 1.2V12h2.2l-.4 3h-1.8v7A10 10 0 0 0 22 12z"/>
          </svg>
        </a>
        <a href="https://www.instagram.com/Farmacroce" target="_blank" rel="noopener" aria-label="Pagina Instagram Farmacroce">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img">
            <defs>
              <linearGradient id="instaGrad" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0%" stop-color="#f58529"/>
                <stop offset="50%" stop-color="#dd2a7b"/>
                <stop offset="100%" stop-color="#8134af"/>
              </linearGradient>
            </defs>
            <path fill="url(#instaGrad)" d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm5 6.2A4.8 4.8 0 1 0 16.8 13 4.8 4.8 0 0 0 12 8.2zm6.4-2.6a1.1 1.1 0 1 0 1.1 1.1 1.1 1.1 0 0 0-1.1-1.1zM12 10.6A1.4 1.4 0 1 1 10.6 12 1.4 1.4 0 0 1 12 10.6z"/>
          </svg>
        </a>
      </div>
    </div>
    <h1>ðŸŽ€ Lista Nascita di Beatrice ðŸŽ€</h1>
    <p class="lead">Benvenuti nella lista nascita di Beatrice presso la Parafarmacia Farmacroce!</p>
  </div>

  <div class="container">
    <div class="main">
      <div id="products" class="products-grid">
        <div class="product" data-product="Zaino Mustela" data-price="45.00" data-stock="1">
          <img class="product-img" src="Zaino Mustela.jpg" alt="Zaino Mustela" style="cursor: zoom-in;">
          <h3>Zaino Mustela</h3>
          <p class="desc">Contenuto: Fluido detergente senza risciaquo 300ml, Detergente delicato 200ml, Hydra bÃ©bÃ¨ crema viso 40 ml, Pasta cambio 50ml.</p>
          <p class="price">Prezzo: â‚¬45.00</p>
          <small class="meta">Marca: Mustela</small>
          <p class="stock">Disponibili: 1</p>
          <button class="add-btn" onclick="addToCart('Zaino Mustela', 45.00)">Aggiungi al carrello</button>
        </div>
          <!-- Chicco soluzione rimossa come richiesto -->

        <div class="product" data-product="Organizer passeggino Mustela" data-price="25.00" data-stock="1" data-sku="MU-002" data-brand="Mustela">
          <img class="product-img" src="Organizer passeggino.jpg" alt="Organizer passeggino Mustela" style="cursor: zoom-in;">
          <h3>Organizer passeggino Mustela</h3>
          <p class="desc">Pratico organizer da agganciare al passeggino con tasche multiple per biberon, pannolini e accessori. Contenuto: Bagnetto mille bolle 200ml, Shampoo dolce 200ml.</p>
          <p class="price">Prezzo: â‚¬25.00</p>
          <small class="meta">Marca: Mustela</small>
          <p class="stock">Disponibili: 1</p>
          <button class="add-btn" onclick="addToCart('Organizer passeggino Mustela', 25.00)">Aggiungi al carrello</button>
        </div>

        <div class="product" data-product="Scatola in latta Mustela" data-price="15.00" data-stock="1" data-sku="MU-003" data-brand="Mustela">
          <img class="product-img" src="Scatola in latta.jpg" alt="Scatola in latta Mustela" style="cursor: zoom-in;">
          <h3>Scatola in latta Mustela</h3>
          <p class="desc">Scatola in latta con design elegante, perfetta per confezionare piccoli regali o conservare accessori per il neonato. Contenuto: Detergente delicato 200ml, Hydra bÃ©bÃ¨ viso 40ml.</p>
          <p class="price">Prezzo: â‚¬15.00</p>
          <small class="meta">Marca: Mustela</small>
          <p class="stock">Disponibili: 1</p>
          <button class="add-btn" onclick="addToCart('Scatola in latta Mustela', 15.00)">Aggiungi al carrello</button>
        </div>

        <div class="product" data-product="Set Mustela crema solare con borsa frigo" data-price="25.00" data-stock="1" data-sku="MU-002" data-brand="Mustela">
          <img class="product-img" src="Mustela borsa frigo.jpg" alt="Set Mustela crema solare con borsa frigo" style="cursor: zoom-in;">
          <h3>Set Mustela crema solare con borsa frigo</h3>
          <p class="desc">Mustela Kit Solare per tutta la famiglia comprende lo Spray Latte Solare SPF50 da 200ml e la pratica Borsa Frigo in R-pet certificato da portare sempre con te</p>
          <p class="price">Prezzo: â‚¬25.00</p>
          <small class="meta">Marca: Mustela</small>
          <p class="stock">Disponibili: 1</p>
          <button class="add-btn" onclick="addToCart('Set Mustela crema solare con borsa frigo', 25.00)">Aggiungi al carrello</button>
        </div>

        <div class="product" data-product="Bagno corpo Mustela da 150 ml" data-price="20.00" data-stock="1" data-sku="MU-002" data-brand="Mustela">
          <img class="product-img" src="Bagno corpo Mustela.jpg" alt="Bagno corpo Mustela da 150 ml" style="cursor: zoom-in;">
          <h3>Bagno corpo Mustela da 150 ml</h3>
          <p class="desc">Mustela Detergente Delicato Corpo e Capelli Ã¨ formulato per la detersione delicata di corpo e capelli, utilizzabile fin dalla nascita.</p>
          <p class="price">Prezzo: â‚¬20.00</p>
          <small class="meta">Marca: Mustela</small>
          <p class="stock">Disponibili: 1</p>
          <button class="add-btn" onclick="addToCart('Bagno corpo Mustela da 150 ml', 20.00)">Aggiungi al carrello</button>
        </div>
      </div>

      <aside class="cart">
        <h2>ðŸ›’ Carrello</h2>
        <ul id="cart"><li style="color: #999;">Carrello vuoto</li></ul>
        <div class="total">
          <strong>Totale: â‚¬<span id="total">0.00</span></strong>
          <img id="paypal-mark" src="paypal.png" alt="PayPal" style="display: none; height: 28px; vertical-align: middle; margin-left: 8px; cursor: pointer;" onclick="document.getElementById('paypal-button-container').scrollIntoView({behavior:'smooth'});">
        </div>
        <!-- Bottone PayPal -->
        <div id="paypal-button-container" style="display: none;"></div>
      </aside>
    </div>
  </div>

  <!-- Lightbox markup -->
  <div id="lightbox" class="lightbox" role="dialog" aria-hidden="true">
    <div class="lightbox-content">
      <button id="lightbox-close" class="lightbox-close" aria-label="Chiudi">âœ•</button>
      <img id="lightbox-img" src="" alt="">
    </div>
  </div>

  <!-- PayPal SDK - modalitÃ  Sandbox per test locale -->
  <script src="https://www.paypal.com/sdk/js?client-id=sb&amp;currency=EUR" data-uid-auto="uid_mwrfqkrdjrrjdriisejljfrdcclpzf"></script>
  <script>
    let cart = [];
    const products = {};
    let paypalButtonsRendered = false;

    function initProducts() {
      const productDivs = document.querySelectorAll('#products .product');
      productDivs.forEach(div => {
        const name = div.getAttribute('data-product');
        const price = parseFloat(div.getAttribute('data-price')) || 0;
        const stock = parseInt(div.getAttribute('data-stock'), 10) || 0;
        products[name] = { price, stock, element: div };
        updateStockDisplay(name);
        // attacca evento click per lightbox sull'immagine del prodotto
        const img = div.querySelector('.product-img') || div.querySelector('img');
        if (img) {
          img.style.cursor = 'zoom-in';
          img.addEventListener('click', function() {
            openLightbox(this.src, this.alt || name);
          });
        }

        // aggiungi pulsante "Mostra altro" se la descrizione Ã¨ lunga
        const desc = div.querySelector('.desc');
        if (desc) {
          const text = desc.textContent || '';
          if (text.length > 120) {
            const btn = document.createElement('button');
            btn.className = 'more-btn';
            btn.type = 'button';
            btn.textContent = 'Mostra altro';
            btn.addEventListener('click', function() { toggleDesc(this); });
            // inserisci il bottone subito dopo la descrizione
            if (desc.nextSibling) desc.parentNode.insertBefore(btn, desc.nextSibling);
            else desc.parentNode.appendChild(btn);
          }
        }
      });
    }

    function toggleDesc(btn) {
      const container = btn.parentElement;
      if (!container) return;
      const desc = container.querySelector('.desc');
      if (!desc) return;
      const expanded = desc.classList.toggle('expanded');
      btn.textContent = expanded ? 'Mostra meno' : 'Mostra altro';
    }

    // Lightbox functions
    function openLightbox(src, alt) {
      const lightbox = document.getElementById('lightbox');
      const lbImg = document.getElementById('lightbox-img');
      if (!lightbox || !lbImg) return;
      lbImg.src = src;
      lbImg.alt = alt || '';
      lightbox.classList.add('open');
      lightbox.setAttribute('aria-hidden', 'false');
    }

    function closeLightbox() {
      const lightbox = document.getElementById('lightbox');
      const lbImg = document.getElementById('lightbox-img');
      if (!lightbox || !lbImg) return;
      lightbox.classList.remove('open');
      lightbox.setAttribute('aria-hidden', 'true');
      // rimuovi src per evitare carico persistente
      lbImg.src = '';
    }

    // chiusura lightbox con click sul bottone o sullo sfondo
    document.addEventListener('click', function(e) {
      const lightbox = document.getElementById('lightbox');
      if (!lightbox) return;
      if (e.target.id === 'lightbox-close') closeLightbox();
      if (e.target === lightbox) closeLightbox();
    });

    function updateStockDisplay(name) {
      const p = products[name];
      if (!p) return;
      const div = p.element;
      const stockSpan = div.querySelector('.stock');
      const btn = div.querySelector('button.add-btn');
      if (p.stock <= 0) {
        stockSpan.textContent = 'Regalato';
        if (btn) {
          btn.disabled = true;
          btn.textContent = 'Regalato';
          btn.style.background = '#999';
          btn.style.cursor = 'default';
        }
      } else {
        stockSpan.textContent = `Disponibili: ${p.stock}`;
        if (btn) {
          btn.disabled = false;
          btn.textContent = 'Aggiungi al carrello';
          btn.style.background = '';
          btn.style.cursor = '';
        }
      }
    }

    function addToCart(product, price) {
      const p = products[product];
      if (!p || p.stock <= 0) {
        alert('Prodotto esaurito');
        updateStockDisplay(product);
        return;
      }
      const existingItem = cart.find(item => item.product === product);
      if (existingItem) {
        if (p.stock <= 0) { alert('Nessun pezzo disponibile'); return; }
        existingItem.quantity += 1;
      } else {
        cart.push({ product, price, quantity: 1 });
      }
      p.stock -= 1;
      updateStockDisplay(product);
      renderCart();
    }

    function removeFromCart(index) {
      const item = cart[index];
      if (item) {
        // ripristina lo stock
        if (products[item.product]) {
          products[item.product].stock += item.quantity;
          updateStockDisplay(item.product);
        }
        cart.splice(index, 1);
        renderCart();
      }
    }

    function changeQuantity(index, change) {
      const item = cart[index];
      if (!item) return;
      const p = products[item.product];
      if (change > 0) {
        if (p.stock <= 0) { alert('Non ci sono piÃ¹ pezzi disponibili'); return; }
        item.quantity += 1;
        p.stock -= 1;
      } else {
        item.quantity -= 1;
        p.stock += 1;
        if (item.quantity <= 0) {
          cart.splice(index, 1);
        }
      }
      updateStockDisplay(item.product);
      renderCart();
    }

    function getTotal() {
      return cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    }

    function renderCart() {
      const cartList = document.getElementById('cart');
      cartList.innerHTML = '';

      if (cart.length === 0) {
        cartList.innerHTML = '<li style="color: #999;">Carrello vuoto</li>';
      } else {
        cart.forEach((item, index) => {
          const subtotal = (item.price * item.quantity).toFixed(2);
          const li = document.createElement('li');
          li.className = 'cart-item';
          li.innerHTML = `
            <div class="left">
              <strong>${item.product}</strong>
              <small>â‚¬${item.price} x ${item.quantity} = â‚¬${subtotal}</small>
            </div>
            <div class="controls">
              <button class="qty-btn" onclick="changeQuantity(${index}, -1)">âˆ’</button>
              <button class="qty-btn" onclick="changeQuantity(${index}, 1)">+</button>
              <button class="remove-btn" onclick="removeFromCart(${index})">ðŸ—‘</button>
            </div>
          `;
          cartList.appendChild(li);
        });
      }

      const total = getTotal().toFixed(2);
      document.getElementById('total').textContent = total;

      // Mostra/nascondi bottone PayPal
      const paypalContainer = document.getElementById('paypal-button-container');
      const paypalMark = document.getElementById('paypal-mark');
      if (cart.length > 0) {
        paypalContainer.style.display = 'block';
        if (paypalButtonsRendered) {
          paypalContainer.innerHTML = '';
          paypalButtonsRendered = false;
        }
        renderPayPalButtons();
        if (paypalMark) paypalMark.style.display = 'inline-block';
      } else {
        paypalContainer.innerHTML = '';
        paypalContainer.style.display = 'none';
        if (paypalMark) paypalMark.style.display = 'none';
      }
    }

    function renderPayPalButtons() {
      if (cart.length === 0) return;
      if (paypalButtonsRendered) return;

      paypal.Buttons({
          createOrder: function(data, actions) {
            const total = getTotal().toFixed(2);
            return actions.order.create({
              purchase_units: [{
                amount: {
                  currency_code: 'EUR',
                  value: total,
                  breakdown: {
                    item_total: { currency_code: 'EUR', value: total }
                  }
                },
                items: cart.map(item => ({
                  name: item.product,
                  unit_amount: { currency_code: 'EUR', value: item.price.toFixed(2) },
                  quantity: item.quantity.toString()
                }))
              }]
            });
          },
        onApprove: function(data, actions) {
          return actions.order.capture().then(function(details) {
            const buyer = (details.payer && details.payer.name && details.payer.name.given_name) || 'Cliente';
            const amount = details.purchase_units && details.purchase_units[0] && details.purchase_units[0].amount && details.purchase_units[0].amount.value;
            alert('Grazie ' + buyer + '! Il pagamento di â‚¬' + amount + ' Ã¨ stato completato con successo.\n\nNumero ordine: ' + details.id);
            cart = [];
            // dopo pagamento non ripristiniamo stock (sono considerati venduti/regalati)
            renderCart();
          });
        },
        onError: function(err) {
          alert('Errore nel pagamento: ' + err);
        },
        onCancel: function(data) {
          alert('Pagamento annullato.');
        }
      }).render('#paypal-button-container');

      paypalButtonsRendered = true;
    }

    document.addEventListener('DOMContentLoaded', function() {
      initProducts();
      renderCart();
    });
  </script>
</body>
</html>

  